<section class="myRegulat">
 <div class="wrapper myRegulat__wrapper">
  <div class="myRegulat-container myRegulat__container">
   <div class="myRegulat-container__item myRegulat-container__item_mr">
    <div class="myRegulat-container__personalCard">
     <div class="myRegulat-container__block">
      <div class="myRegulat-container__avatar"><img
        src="/style/img/png-clipart-indian-elephant-drawing-animal-locomotion-blue-mammal.png" alt=""
        class="myRegulat-container__img"></div>
     </div>
     <div class="myRegulat-container__personalData">
      <span class="myRegulat-container__name">{{user.profile.lastName}} {{user.profile.name}}
       {{user.profile.patronymic}}</span>
      <span class="myRegulat-container__work">({{user.profile.NameOrganization}})</span>
      <span class="myRegulat-container__position">({{user.profile.position}})</span>
     </div>
     <div class="myRegulat-container__createRegulat myRegulat-container-createRegulat">
      <div class="myRegulat-container-createRegulat__item">
       <span class="myRegulat-container-createRegulat__title">Создано регламентов</span><span
        class="myRegulat-container-createRegulat__qty">{{documents.length}}</span>
      </div>
      <div class="myRegulat-container-createRegulat__item">
       <span class="myRegulat-container-createRegulat__title">Регламенты на согласование</span><span
        class="myRegulat-container-createRegulat__qty">{{documents.length}}</span>
      </div>
      <div class="myRegulat-container-createRegulat__item">
       <span class="myRegulat-container-createRegulat__title">Согласованно регламентов</span><span
        class="myRegulat-container-createRegulat__qty">0</span>
      </div>
     </div>
    </div>
   </div>
   <div class="myRegulat-container__item myRegulat-container__item_right">
    <form class="search-form myRegulat-container__form" role="search" method="get" id="searchform" action="#">
     <input class="search-form__input" type="text" value="" name="s" id="s" placeholder="Найти регламент" />
     <button type="submit" id="searchsubmit" class="search-form__searchsubmit">
      <svg xmlns="http://www.w3.org/2000/svg" width="19.856" height="20.848" viewBox="0 0 19.856 20.848">
       <path
        d="M91.119,310.567l-4.713-4.713a8.8,8.8,0,0,0,2.51-6.147,8.708,8.708,0,1,0-8.708,8.708,8.983,8.983,0,0,0,5.02-1.588l4.815,4.815a.877.877,0,0,0,1.127,0A.792.792,0,0,0,91.119,310.567ZM73.037,299.708a7.171,7.171,0,1,1,7.171,7.171A7.192,7.192,0,0,1,73.037,299.708Z"
        transform="translate(-71.5 -291)" fill="#414544" />
      </svg>
     </button>
    </form>
    <div class="myRegulat-container-list myRegulat-container__list">
     <div class="myRegulat-container-list__header">
      <div class="section-header">
       <h2 class="section-header__title myRegulat-container-list__title">{{title}}</h2>
      </div>
      <div class="myRegulat-container-list__create"><a href="../{{id}}/document/createDocument"
        class="myRegulat-container-list__link">Создать
        <i class="myRegulat-container-list__addIcon"></i></a>
      </div>
     </div>
     <div class="myRegulat-container-list__block">
      <div class="myRegulat-container-list__container">
       {{#if documents.length}}
       <div class="myRegulat-container-list__total-regul">У вас
        <span class="myRegulat-container-list__total-qty">{{documents.length}}</span> <span class="sclan">созданных
         регламента</span>
       </div>
       {{else}}
       <div class="myRegulat-container-list__total-regul">У вас
        <span class="myRegulat-container-list__total-qty">пока нет созданных регламентов</span>
       </div>
       {{/if}}

       <ul class="myRegulat-container-list__regulat">
        {{#if documents.length}}
        {{#each documents}}
        <li class="myRegulat-container-list__item myRegulat-container-list-item">
         <a href="./comments/{{_id}}" class="myRegulat-container-list-item__title"><i
           class="myRegulat-container-list-item__docIcon"></i>
          {{wordSlice title}}</a>
         <div class="myRegulat-container-list-item__options">
          <div class="myRegulat-container-list-item__vers">Версия <span
            class="myRegulat-container-list-item__vers-qty">{{#each versions}}{{version}}{{/each}}</span>
          </div><span class="create-personal-data__date regulat-date">{{dateСreate}}</span>
          <div class="myRegulat-container-list-item__mode">Режим: <span
            class="myRegulat-container-list-item__status">Черновик</span></div>
          <a href="#" class="myRegulat-container-list-item__file myRegulat-pdf"></a>
          <a href="#" class="myRegulat-container-list-item__file myRegulat-word"></a>
         </div>
        </li>
        {{/each}}
        {{else}}
        <li class="myRegulat-container-list__item myRegulat-container-list-item"></li>
        {{/if}}
       </ul>
      </div>
     </div>
     <div class="myRegulat-container-list__header">
      <div class="section-header">
       <h2 class="section-header__title myRegulat-container-list__title">Документы отправленные вам на проверку</h2>
      </div>
     </div>
     <div class="myRegulat-container-list__block">
      <div class="myRegulat-container-list__container">
       {{#if docWatch.length}}
       <div class="myRegulat-container-list__total-regul">У вас
        <span class="myRegulat-container-list__total-qty">{{docWatch.length}}</span> <span class="sclan">документ</span>
        на проверку
       </div>
       {{else}}
       <div class="myRegulat-container-list__total-regul">У вас
        <span class="myRegulat-container-list__total-qty">пока нет документов отпарвленных вам на проверку</span>
       </div>
       {{/if}}

       <ul class="myRegulat-container-list__regulat">
        {{#if docWatch.length}}
        {{#each docWatch}}
        <li class="myRegulat-container-list__item myRegulat-container-list-item">
         <a href="./comments/{{_id}}" class="myRegulat-container-list-item__title"><i
           class="myRegulat-container-list-item__docIcon"></i>
          {{wordSlice title}}</a>
         <div class="myRegulat-container-list-item__options">
          <div class="myRegulat-container-list-item__vers">Версия <span
            class="myRegulat-container-list-item__vers-qty">{{#each versions}}{{version}}{{/each}}</span>
          </div>
          <span class="create-personal-data__date regulat-date">{{dateСreate}}</span>
          <div class="myRegulat-container-list-item__mode">Режим: <span
            class="myRegulat-container-list-item__mode-qty">комментрирование</span></div><span
           class="myRegulat-container-list-item__file"></span>
         </div>
        </li>
        {{/each}}
        {{else}}
        <li class="myRegulat-container-list__item myRegulat-container-list-item"></li>
        {{/if}}
       </ul>
      </div>
     </div>
    </div>
    <div class="myRegulat-container-list">
     <div class="section-header">
      <h2 class="section-header__title myRegulat-container-list__title">Мои регламенты</h2>
     </div>
     <div class="myRegulat-container-list__block myRegulat-container-list__block_brsNone">
      <div class="myRegulat-container-list__container">
       <ul class="myRegulat-container-list__regulat">
        {{#each findStatus}}
        <li class="myRegulat-container-list-item myRegulat-container-list__item_borderNone">
         <a href="#" class="myRegulat-container-list-item__title"><i class="myRegulat-container-list-item__docIcon"></i>
          {{wordSlice title}}</a>
         <span
          class="myRegulat-container-list-item__status myRegulat-container-list-item__status_reg">Согласовано</span>
        </li>
        {{else}}
        <p class="myRegulat-container-list__total-regul">У вас пока нет согласованных регламентов</p>
        {{/each}}
       </ul>
      </div>
     </div>
    </div>
   </div>
  </div>
 </div>
</section>

{{#if isRegulat}}

<script>
 const toDate = date => {
  return new Intl.DateTimeFormat('ru-RU', {
   day: '2-digit',
   month: '2-digit',
   year: 'numeric',
   hour: '2-digit',
   minute: '2-digit'
  }).format(new Date(date))
 }
 document.querySelectorAll('.create-personal-data__date').forEach(item => {
  item.textContent = toDate(item.textContent)
 })

 function getNoun(number, one, two, five) {
  let n = Math.abs(number);
  n %= 100;
  if (n >= 5 && n <= 20) {
   return five;
  }
  n %= 10;
  if (n === 1) {
   return one;
  }
  if (n >= 2 && n <= 4) {
   return two;
  }
  return five;
 }

 const num1 = document.querySelectorAll('.myRegulat-container-list__total-qty')[0].textContent;
 const word1 = getNoun(+num1, 'созданный регламент', 'созданных регламента', 'созданных регламентов');
 document.querySelectorAll('.sclan')[0].innerHTML = word1;
 const num2 = document.querySelectorAll('.myRegulat-container-list__total-qty')[1].textContent;
 const word2 = getNoun(+num2, 'документ', 'документа', 'документов');
 document.querySelectorAll('.sclan')[1].innerHTML = word2;
</script>
{{/if}}